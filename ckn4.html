<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>三省轩主文集</title>
    <style>
        /* 全局样式 */
        body {
            font-family: "楷体", serif;
            display: flex;
            margin: 0;
            background: #f8f4e9;
            color: #333;
            min-height: 100vh;
        }
        
        /* 左侧目录 */
        .sidebar {
            width: 300px;
            height: 100vh;
            overflow-y: auto;
            background: #e8e0d0;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            position: fixed;
        }
        
        .sidebar h2 {
            text-align: center;
            color: #8b4513;
            border-bottom: 1px solid #cdaa7d;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        .article-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .article-list li {
            margin: 5px 0;
        }
        
        .article-list li a {
            display: block;
            padding: 12px 15px;
            background: #f0e6d2;
            color: #5a3921;
            text-decoration: none;
            border-radius: 3px;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        
        .article-list li a:hover,
        .article-list li a.active    {
            background: #cdaa7d;
            color: white;
        }
        
        .article-number {
            display: inline-block;
            width: 25px;
            text-align: right;
            margin-right: 10px;
            color: #8b4513;
            font-weight: bold;
        }
        
        /* 右侧文章 */
        .content {
            flex: 1;
            margin-left: 340px;
            padding: 30px;
            max-width: 800px;
        }
        
        /* 文集标题 */
        .collection-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #8b4513;
            padding-bottom: 20px;
        }
        
        .collection-header h1 {
            color: #5a3921;
            font-size: 2.5em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            margin-top: 0;
        }
        
        /* 搜索栏 */
        .search-bar {
            margin-top: 15px;
            display: flex;
            justify-content: center;
        }
        
        .search-bar input {
            padding: 8px 15px;
            width: 300px;
            border: 1px solid #cdaa7d;
            border-radius: 4px 0 0 4px;
            font-family: "楷体", serif;
            font-size: 16px;
            outline: none;
        }
        
        .search-bar button {
            padding: 8px 15px;
            background: #8b4513;
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            font-family: "楷体", serif;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        .search-bar button:hover {
            background: #5a3921;
        }
 
        /* 新增导航栏样式（搜索框下方） */
        .page-nav {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .page-nav a {
            color: #5a3921;
            text-decoration: none;
            padding: 8px 15px;
            border: 1px solid #cdaa7d;
            border-radius: 4px;
            transition: all 0.3s;
            font-family: "楷体", serif;
        }
        
        .page-nav a:hover, 
        .page-nav a.active   {
            background: #8b4513;
            color: white;
            border-color: #5a3921;
        }
        
        /* 文章导航 */
        .article-nav {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px dashed #cdaa7d;
            border-bottom: 1px dashed #cdaa7d;
        }
        
        .article-nav a {
            color: #8b4513;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 3px;
            transition: all 0.3s;
        }
        
        .article-nav a:hover {
            background: #f0e6d2;
            text-decoration: underline;
        }
        
        /* 文章内容 */
        .article-content {
            line-height: 1.8;
            font-size: 18px;
        }
        
        .article-title {
            color: #5a3921;
            border-left: 5px solid #8b4513;
            padding-left: 15px;
            margin: 30px 0 20px 0;
        }
        
        .article-meta {
            color: #888;
            font-size: 14px;
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .article-meta span {
            display: flex;
            align-items: center;
        }
        
        .article-meta span::before {
            content: "•";
            margin-right: 5px;
        }
        
        /* 关键词高亮 */
        .highlight {
            background-color: #ffe0b2;
            padding: 0 3px;
            border-radius: 3px;
        }
        
        /* 加载指示 */
        .loading {
            text-align: center;
            padding: 50px;
            color: #8b4513;
            font-size: 1.2em;
        }
        
        /* 移动端适配 */
        @media screen and (max-width: 768px) {
            body {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                padding: 15px;
            }
            .content {
                margin-left: 0;
                padding: 20px;
            }
            .collection-header h1 {
                font-size: 1.8em;
            }
            .search-bar input {
                width: 70%;
            }
            .page-nav {
                gap: 5px;
            }
            .page-nav a {
                padding: 6px 10px;
                font-size: 14px;
            }
        }
        
        /* 打印样式 */
        @media print {
            .sidebar, .search-bar, .page-nav {
                display: none;
            }
            .content {
                margin: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- 左侧目录 -->
    <aside class="sidebar">
        <div class="author-link">
            <a href="cknjianjie.html"    style="display: block; text-align: center; padding: 10px; background: #8b4513; color: white; margin-bottom: 15px; border-radius: 5px;"> 
                📝 关于作者版权 
            </a>
        </div>
        <h2>📜 文章目录</h2>
        <ul class="article-list" id="articleList">
            <!-- 动态生成目录 -->
        </ul>
    </aside>
    
    <!-- 右侧文章 -->
    <main class="content" id="articleContent">
        <header class="collection-header">
            <h1 lang="zh">三省轩主文集</h1>
            <div role="search" class="search-bar">
                <input type="search" id="searchInput" placeholder="输入关键词搜索..." aria-label="搜索文章">
                <button onclick="searchArticles()">搜索</button>
            </div>
        </header>
        
        <!-- 新增的导航栏（搜索框下方） -->
        <nav class="page-nav">
            <a href="index.html"   class="active">首页</a>
            <a href="ckn2.html">  第二页</a>
            <a href="ckn3.html">  第三页</a>
            <a href="ckn4.html">  第四页</a>
        </nav>
        
        <nav class="article-nav">
            <a href="#" id="prevArticle">← 上一篇</a>
            <a href="#" id="nextArticle">下一篇 →</a>
        </nav>
        
        <article>
            <h1 class="article-title" id="articleTitle">欢迎来到三省轩主文集</h1>
            <div class="article-meta" id="articleMeta">
                <span>请从左侧选择文章</span>
            </div>
            <div class="article-content" id="articleText">
                <p>此处将显示您选择的文章内容...</p>
            </div>
        </article>
        
        <nav class="article-nav">
            <a href="#" id="prevArticleBottom">← 上一篇</a>
            <a href="#" id="nextArticleBottom">下一篇 →</a>
        </nav>
    </main>
 
    <script>
        // 修正后的文章数据 
        const articles = [
    {
        "id": 401,
        "title": "\u300a无为之码\u300b",
        "category": "道",
        "date": "乙巳年五月十三",
        "content": "<p>Git不提交·自然版本真<br>VS Code无为境·Tab键里养元神</p><p>五行CSS相生克·三清React定乾坤<br>四百篇成尘与土·道在.gitignore中存</p>"
    },
    {
        "id": 402,
        "title": "\u300a代码禅\u300b",
        "category": "佛",
        "date": "乙巳年五月十三",
        "content": "<p>HTML即色·CSS是空<br>JavaScript起心动念处<br>console.log() 万法踪</p>"
    },
    {
        "id": 403,
        "title": "\u300a道无名\u300b",
        "category": "道",
        "date": "乙巳年五月十三",
        "content": "<p>无名天地始·有名万物母<br>Git提交如呼吸·VS Code似丹炉</p>"
    },
    {
        "id": 404,
        "title": "\u300a格物空\u300b",
        "category": "儒",
        "date": "乙巳年五月十三",
        "content": "<p>格尽代码三千行·物我两忘见性光<br>四百文章未足道·中庸方是妙文章</p>"
    }
        ];
 
        // 当前文章索引 
        let currentArticleIndex = 0;
        let searchTimer = null;
        
        // 初始化加载 
        document.addEventListener('DOMContentLoaded',  function() {
            // 预加载文章 
            articles.forEach(function(article)  {
                const link = document.createElement('link');   
                link.rel  = 'prefetch';
                link.href  = `#article=${article.id}`;   
                document.head.appendChild(link);   
            });
            
            renderArticleList();
            if (articles.length  > 0) {
                loadArticle(0);
            }
            
            // 搜索框防抖监听 
            document.getElementById('searchInput').addEventListener('input',  function() {
                clearTimeout(searchTimer);
                searchTimer = setTimeout(searchArticles, 300);
            });
            
            // 键盘导航 
            document.addEventListener('keydown',  function(e) {
                if (e.key  === 'ArrowLeft' && currentArticleIndex > 0) {
                    loadArticle(currentArticleIndex - 1);
                } else if (e.key  === 'ArrowRight' && currentArticleIndex < articles.length  - 1) {
                    loadArticle(currentArticleIndex + 1);
                }
            });
        });
        
        // 渲染目录 
        function renderArticleList() {
            const listContainer = document.getElementById('articleList');    
            listContainer.innerHTML  = articles.map(function(article)  {
                return `
                <li>
                    <a href="#" onclick="loadArticle(${articles.indexOf(article)})">    
                        <span class="article-number">${article.id}.</span>    
                        ${article.title}    
                        <small>(${article.category})</small>    
                    </a>
                </li>
                `;
            }).join('');
        }
        
        // 加载文章 
        function loadArticle(index) {
            document.getElementById('articleText').innerHTML  = '<div class="loading">🕯️ 文章加载中...</div>';
            
            setTimeout(function() {
                currentArticleIndex = index;
                const article = articles[index];
                
                document.getElementById('articleTitle').textContent  = article.title;    
                document.getElementById('articleMeta').innerHTML  = `
                    <span>分类：${article.category}</span>    
                    <span>日期：${article.date}</span>    
                    <span>编号：${article.id}</span>    
                `;
                document.getElementById('articleText').innerHTML  = article.content;    
                
                updateNavButtons();
                window.scrollTo(0,  0);
                
                // 更新目录高亮 
                document.querySelectorAll('.article-list  a').forEach(function(a, i) {
                    a.classList.toggle('active',  i === index);
                });
            }, 100);
        }
        
        // 更新导航按钮 
        function updateNavButtons() {
            const prevButtons = document.querySelectorAll('#prevArticle,  #prevArticleBottom');
            const nextButtons = document.querySelectorAll('#nextArticle,  #nextArticleBottom');
            
            // 上一篇按钮 
            prevButtons.forEach(function(btn)  {
                if (currentArticleIndex > 0) {
                    btn.style.visibility  = 'visible';
                    btn.onclick  = function(e) {
                        e.preventDefault();    
                        loadArticle(currentArticleIndex - 1);
                    };
                } else {
                    btn.style.visibility  = 'hidden';
                }
            });
            
            // 下一篇按钮 
            nextButtons.forEach(function(btn)  {
                if (currentArticleIndex < articles.length  - 1) {
                    btn.style.visibility  = 'visible';
                    btn.onclick  = function(e) {
                        e.preventDefault();    
                        loadArticle(currentArticleIndex + 1);
                    };
                } else {
                    btn.style.visibility  = 'hidden';
                }
            });
        }
        
        // 搜索功能 
        function searchArticles() {
            const keyword = document.getElementById('searchInput').value.trim().toLowerCase();    
            const filtered = articles.filter(function(article)  { 
                return article.title.toLowerCase().includes(keyword)  || 
                       article.content.toLowerCase().includes(keyword);    
            });
            
            const listContainer = document.getElementById('articleList');    
            listContainer.innerHTML  = filtered.map(function(article)  {
                return `
                <li>
                    <a href="#" onclick="loadArticle(${articles.indexOf(article)})">    
                        <span class="article-number">${article.id}.</span>    
                        ${highlightKeyword(article.title,  keyword)}
                        <small>(${article.category})</small>    
                    </a>
                </li>
                `;
            }).join('');
        }
        
        // 关键词高亮（安全版）
        function highlightKeyword(text, keyword) {
            if (!keyword) return text;
            const div = document.createElement('div');   
            div.textContent  = text;
            const escapedText = div.innerHTML;   
            return escapedText.replace(   
                new RegExp(keyword.replace(/[.*+?^${}() |[\]\\]/g, '\\$&'), 'gi'), 
                function(match) {
                    return `<span class="highlight">${match}</span>`;
                }
            );
        }
    </script>
</body>
</html>
